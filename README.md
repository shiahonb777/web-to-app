<div align="center">

# WebToApp 🚀

**[English](README_EN.md) | 简体中文**

**无需编程，一键将任意网站或媒体转换为独立 Android 应用！**

[![GitHub stars](https://img.shields.io/github/stars/shiahonb777/web-to-app?style=social)](https://github.com/shiahonb777/web-to-app)
[![License](https://img.shields.io/badge/License-MIT-blue.svg)](LICENSE)

</div>

---

WebToApp 是一款功能强大的 Android 原生应用，让你无需任何编程知识，即可将网站、图片、视频转换为独立的 App。支持直接构建 APK 安装包，真正做到「零门槛出包」。

## ✨ 核心亮点

- 🌐 **网站转App** - 输入任意网址，生成独立 WebView 应用
- 🎬 **媒体转App** - 图片/视频一键转换为全屏展示应用
- 💻 **HTML转App** - HTML/CSS/JS 项目转换为独立应用
- 🧩 **扩展模块系统** - 类油猴脚本，9个功能丰富的内置模块，支持自定义开发
- 🤖 **AI 模块开发** - AI Agent 辅助开发扩展模块，自动生成代码
- 🎨 **AI 图标生成** - 使用 AI 生成精美应用图标
- 🎵 **在线音乐搜索** - 在线搜索下载音乐作为 BGM
- 📢 **公告模板系统** - 10 种精美公告弹窗模板
- 🌐 **网页自动翻译** - 网页内容自动翻译功能
- 📦 **一键出包** - 无需 Android Studio，直接生成可安装 APK
- 🛡️ **内置功能** - 广告拦截、激活码验证、背景音乐、公告弹窗
- ⚡ **应用修改器** - 修改已安装应用的图标和名称

## 🎯 适用场景

- 📱 将常用网站封装为独立 App，桌面一键直达
- 🎞️ 制作电子相册、视频壁纸、产品展示应用
- 💻 前端项目快速打包成 Android 应用

- 🏢 企业内部系统快速 App 化
- 🎮 游戏/工具类 H5 应用独立封装
- 🔧 给已安装应用换个喜欢的图标
- 🧩 为网页添加自定义功能（广告屏蔽、深色模式等）

## 📋 功能特性

### 核心功能
- **URL转App**：输入任意网址，一键生成独立应用
- **媒体转App**：支持图片/视频转换为独立应用
- **HTML转App**：支持 HTML/CSS/JS 项目转换为独立应用
- **自定义图标**：支持从相册选择或 AI 生成自定义应用图标
- **自定义名称**：自定义应用显示名称

### 扩展模块系统
- **类油猴脚本**：向网页注入自定义 JavaScript/CSS 代码
- **9个内置模块**：视频下载、B站/抖音/小红书视频提取、视频增强、网页分析、暗黑模式、隐私保护、内容增强
- **30+ 代码模板**：快速创建常见功能模块
- **模块分类**：20+ 分类（内容过滤、样式修改、功能增强、媒体处理等）
- **URL 匹配规则**：支持通配符和正则表达式匹配
- **配置项系统**：模块支持用户自定义配置
- **权限声明**：细粒度权限控制
- **分享码**：一键生成分享码，轻松分享模块
- **导入导出**：支持模块文件导入导出

### AI 模块开发 Agent
- **自然语言开发**：用自然语言描述需求，AI 自动生成模块代码
- **语法检查**：自动检查 JavaScript/CSS 语法错误
- **安全扫描**：检测 XSS、eval 等安全问题
- **自动修复**：AI 自动修复检测到的错误
- **代码片段库**：常用代码片段快速插入
- **调试测试页面**：内置测试页面验证模块效果

### AI 功能
- **多供应商支持**：Google Gemini、OpenAI、智谱 GLM、火山引擎、MiniMax、OpenRouter 等
- **AI HTML 编程**：AI 辅助生成和修改 HTML/CSS/JS 代码
- **AI 图标生成**：使用 AI 生成应用图标
- **图标库**：收藏和管理生成的图标
- **会话管理**：支持多会话、模板选择、样式定制
- **实时预览**：代码生成后可直接预览效果
- **AI 设置**：统一管理 API 密钥和模型配置

### 集成功能
- **启动画面**：支持图片/视频启动动画，内置视频裁剪器
- **背景音乐**：支持为应用添加 BGM，可配合歌词同步显示
- **在线音乐搜索**：在线搜索下载音乐作为 BGM
- **激活码验证**：内置激活码机制，可限制应用使用
- **弹窗公告**：启动时显示公告信息，支持链接跳转
- **公告模板**：10 种精美公告模板（小红书、渐变、毛玻璃、霓虹等）
- **广告拦截**：内置广告拦截引擎，自动过滤网页广告
- **网页自动翻译**：网页内容自动翻译，支持中/英/日等语言
- **广告集成**：预留广告SDK接口（横幅/插屏/开屏）

### 导出功能
- **桌面快捷方式**：创建桌面图标，像原生App一样启动
- **构建APK安装包**：直接生成独立APK并安装，无需Android Studio
- **项目模板导出**：导出完整Android Studio项目，可自行编译APK

### 媒体应用功能
- **图片转App**：选择图片生成全屏展示应用
- **视频转App**：选择视频生成循环播放应用
- **显示配置**：支持音频开关、循环播放、自动播放、铺满屏幕
- **APK打包**：媒体应用支持导出为独立APK

### 主题系统
- **多种主题**：内置多款精美主题风格
- **深色模式**：支持跟随系统、手动切换
- **动画效果**：可自定义动画开关和速度
- **粒子特效**：部分主题支持粒子背景效果

### 应用图标修改器
- **应用列表扫描**：自动获取设备上已安装的应用列表
- **图标/名称修改**：自由修改任意应用的图标和显示名称
- **克隆安装**：将修改后的应用作为新应用安装（独立包名）
- **快捷方式启动**：创建使用新图标的快捷方式，启动原应用

## 技术栈

- **语言**：Kotlin 1.9+
- **UI框架**：Jetpack Compose + Material Design 3
- **架构**：MVVM + Repository
- **数据库**：Room
- **网络**：OkHttp
- **图片加载**：Coil
- **最低支持**：Android 6.0 (API 23)

## 项目结构

```
app/src/main/java/com/webtoapp/
├── WebToAppApplication.kt      # Application类
├── core/                       # 核心功能模块
│   ├── activation/            # 激活码管理
│   ├── adblock/              # 广告拦截
│   ├── ads/                  # 广告集成
│   ├── ai/                   # AI 功能
│   │   ├── AiApiClient.kt   # AI API 客户端
│   │   ├── AiConfigManager.kt # AI 配置管理
│   │   └── htmlcoding/      # AI HTML 编程
│   ├── announcement/         # 公告管理
│   ├── apkbuilder/          # APK构建器
│   │   ├── ApkBuilder.kt    # 构建核心
│   │   ├── ApkSigner.kt     # APK签名
│   │   ├── ArscEditor.kt    # 资源表编辑
│   │   ├── AxmlEditor.kt    # Manifest编辑
│   │   └── ApkTemplate.kt   # 模板管理
│   ├── appmodifier/         # 应用修改器
│   ├── bgm/                 # 背景音乐
│   │   ├── BgmPlayer.kt     # 播放器
│   │   ├── OnlineMusicApi.kt # 在线音乐API
│   │   └── OnlineMusicDownloader.kt # 音乐下载器
│   ├── export/              # 导出功能
│   ├── extension/           # 扩展模块系统
│   │   ├── ExtensionModule.kt # 模块数据模型
│   │   ├── ExtensionManager.kt # 模块管理器
│   │   ├── BuiltInModules.kt # 9个内置模块
│   │   ├── ModuleTemplates.kt # 30+ 代码模板
│   │   ├── CodeSnippets.kt  # 代码片段库
│   │   └── agent/           # AI Agent 系统
│   │       ├── ModuleAgentEngine.kt # Agent 引擎
│   │       ├── AgentToolExecutor.kt # 工具执行器
│   │       └── AgentTool.kt # 工具定义
│   ├── shell/               # Shell模式管理
│   └── webview/             # WebView管理
│       ├── WebViewManager.kt
│       └── TranslateBridge.kt # 翻译桥接
├── data/                      # 数据层
│   ├── model/               # 数据模型
│   │   └── WebApp.kt
│   └── repository/          # 数据仓库
├── ui/                        # UI层
│   ├── MainActivity.kt      # 主Activity
│   ├── media/               # 媒体应用
│   ├── navigation/          # 导航
│   ├── screens/             # 页面
│   │   ├── HomeScreen.kt    # 主页
│   │   ├── CreateAppScreen.kt # 创建应用
│   │   ├── CreateMediaAppScreen.kt # 创建媒体应用
│   │   ├── CreateHtmlAppScreen.kt # 创建HTML应用
│   │   ├── ExtensionModuleScreen.kt # 扩展模块管理
│   │   ├── ModuleEditorScreen.kt # 模块编辑器
│   │   ├── AiModuleDeveloperScreen.kt # AI模块开发
│   │   ├── HtmlCodingScreen.kt # AI HTML编程
│   │   ├── AiSettingsScreen.kt # AI设置
│   │   ├── ThemeSettingsScreen.kt # 主题设置
│   │   ├── AboutScreen.kt   # 关于作者
│   │   └── AppModifierScreen.kt # 应用修改器
│   ├── components/          # 可复用组件
│   │   ├── announcement/    # 公告模板
│   │   │   ├── AnnouncementTemplates.kt # 10种模板
│   │   │   └── AnnouncementTemplateSelector.kt
│   │   ├── IconGeneratorDialog.kt # AI图标生成
│   │   ├── IconLibraryDialog.kt # 图标库
│   │   ├── OnlineMusicSelector.kt # 在线音乐选择
│   │   ├── ManualLrcAligner.kt # 手动LRC对齐
│   │   ├── ExtensionModuleSelector.kt # 模块选择器
│   │   └── CodeSnippetSelector.kt # 代码片段选择
│   ├── theme/               # 主题系统
│   └── viewmodel/           # ViewModel
└── util/                      # 工具类
    ├── MediaStorage.kt      # 媒体文件存储
    └── IconLibraryStorage.kt # 图标库存储
```

## 使用说明

### 创建应用
1. 点击主页的 "创建应用" 按钮
2. 填写应用名称和网站地址
3. （可选）选择自定义图标或使用 AI 生成
4. （可选）配置激活码、公告、广告拦截等功能
5. （可选）选择扩展模块增强功能
6. 点击保存

### 使用扩展模块
1. 在创建/编辑应用时，展开"扩展模块"卡片
2. 点击"选择模块"浏览可用模块
3. 选择需要的模块（如深色模式、广告拦截等）
4. 模块会在应用运行时自动注入执行

### 创建自定义模块
1. 进入"扩展模块"页面
2. 点击"+"创建新模块
3. 选择模板或从零开始编写
4. 配置模块名称、分类、URL匹配规则
5. 编写 JavaScript/CSS 代码
6. 保存并测试

### AI 辅助开发模块
1. 进入"AI 模块开发"页面
2. 用自然语言描述你想要的功能
3. AI 会自动生成模块代码
4. 自动进行语法检查和安全扫描
5. 预览效果并保存

### 运行应用
- 点击应用卡片直接预览运行
- 长按或点击菜单可进行更多操作

### 创建桌面快捷方式
1. 点击应用卡片右侧菜单
2. 选择 "创建快捷方式"
3. 确认添加到桌面

### 构建APK安装包
1. 点击应用卡片右侧菜单
2. 选择 "构建 APK"
3. 点击 "开始构建"
4. 构建完成后自动弹出安装界面

### 导出为项目模板
1. 点击应用卡片右侧菜单
2. 选择 "导出项目"
3. 在导出目录找到项目文件夹
4. 使用Android Studio打开并编译

### 使用应用修改器
1. 点击主页右上角的应用图标按钮
2. 在应用列表中搜索或筛选目标应用
3. 点击应用进入修改界面
4. 选择新图标、输入新名称
5. 选择操作方式：
   - **快捷方式**：创建使用新图标的桌面快捷方式
   - **克隆安装**：生成新APK并安装为独立应用

## 编译说明

### 环境要求
- Android Studio Hedgehog (2023.1.1) 或更高版本
- JDK 17
- Gradle 8.2

### 编译步骤
```bash
# 克隆项目
git clone <repository_url>

# 进入项目目录
cd 网站转app

# 编译Debug版本
./gradlew assembleDebug

# 编译Release版本
./gradlew assembleRelease
```

### 签名配置
Release版本需要配置签名，在 `app/build.gradle.kts` 中添加：
```kotlin
signingConfigs {
    create("release") {
        storeFile = file("your-keystore.jks")
        storePassword = "your-store-password"
        keyAlias = "your-key-alias"
        keyPassword = "your-key-password"
    }
}
```

## 扩展模块系统

### 内置模块
| 模块 | 功能 |
|------|------|
| ⬇️ 视频下载器 | 自动检测网页视频，支持 MP4 和 Blob 流下载 |
| 📺 B站视频提取 | 提取 B站最高画质视频和音频流地址 |
| 🎬 抖音视频提取 | 提取抖音无水印视频地址 |
| 📱 小红书视频提取 | 提取小红书视频播放地址 |
| ⚡ 视频增强 | 倍速控制（0.5x-5x）、画中画、后台播放、阻止App跳转 |
| 🔧 网页分析工具 | 元素审查、网络监控、Cookie管理、Console注入 |
| 🌙 高级暗黑模式 | 智能色彩反转、图片亮度控制、定时开关 |
| 🛡️ 隐私保护 | 去广告、反指纹追踪、点击劫持保护、外链警告 |
| 📝 内容增强 | 强制复制、划词翻译、长截图、Markdown转化 |

### 模块分类
- 内容过滤、内容增强、样式修改、主题美化
- 功能增强、自动化、导航辅助、数据提取
- 媒体处理、视频增强、图片处理、音频控制
- 安全隐私、反追踪、社交增强、购物助手
- 阅读模式、翻译工具、开发调试、其他

### NativeBridge API（原生能力）
扩展模块可以通过 `window.NativeBridge` 调用 Android 原生功能：

| API | 功能 |
|-----|------|
| `showToast(msg, duration?)` | 显示 Toast 提示 |
| `vibrate(ms?)` | 触发震动反馈 |
| `copyToClipboard(text)` | 复制到剪贴板 |
| `share(title, text, url?)` | 调用系统分享 |
| `saveImageToGallery(url)` | 保存图片到相册 |
| `saveVideoToGallery(url)` | 保存视频到相册 |
| `openUrl(url)` | 用浏览器打开链接 |
| `openApp(packageName)` | 打开其他应用 |
| `getDeviceInfo()` | 获取设备信息 |
| `isNetworkAvailable()` | 检查网络状态 |
| `saveToFile(content, filename)` | 保存文件 |

### 模块开发示例
```javascript
// 示例1：自动隐藏广告
const selectors = getConfig('selectors', '.ad-banner').split('\n');
function hideAds() {
    selectors.forEach(sel => {
        document.querySelectorAll(sel).forEach(el => {
            el.style.display = 'none';
        });
    });
}
hideAds();
new MutationObserver(hideAds).observe(document.body, { childList: true, subtree: true });

// 示例2：一键保存图片（使用 NativeBridge）
document.querySelectorAll('img').forEach(img => {
    img.addEventListener('contextmenu', (e) => {
        e.preventDefault();
        NativeBridge.saveImageToGallery(img.src);
        NativeBridge.vibrate(50);
        NativeBridge.showToast('图片已保存');
    });
});

// 示例3：分享当前页面
function shareCurrentPage() {
    NativeBridge.share(document.title, '分享给你一个有趣的页面', location.href);
}
```

## 公告模板

内置 10 种精美公告弹窗模板：
- **极简风格** - 简洁大方
- **小红书风格** - 活泼可爱
- **渐变风格** - 现代时尚
- **毛玻璃风格** - 通透质感
- **霓虹风格** - 炫酷发光
- **可爱风格** - 粉嫩甜美
- **优雅风格** - 金色高贵
- **节日风格** - 喜庆热闹
- **暗黑风格** - 神秘深邃
- **自然风格** - 清新绿色

## 广告拦截规则

内置常见广告域名拦截，支持自定义规则：
- 域名规则：`||example.com` 或直接输入域名
- 通配符规则：`*ads*`、`*/banner/*`

## 激活码机制

- 支持批量设置多个激活码
- 激活状态本地持久化
- 支持SHA-256加密校验

## 注意事项

1. 部分网站可能有反爬虫机制，加载可能受限
2. 需要网络权限才能正常使用
3. 导出的项目需要在PC端用Android Studio编译
4. 激活码仅本地验证，如需服务端验证请自行扩展
5. 扩展模块在 WebView 中执行，部分网站可能有 CSP 限制

## License

MIT License

## 更新日志

### v1.7.6
**新功能与优化**
- 开机自启动和定时自启动功能
- 数据备份：一键导出/导入所有应用数据
- 全屏模式状态栏透明叠加显示

### v1.7.5
**新功能与优化**
- 全屏模式下可选择显示状态栏：解决不开全屏模式会出现导航栏的问题
- 修复 HTML 项目长按文字无法复制的问题
- 支持 Android 6.0 系统（API 23）

### v1.7.4
**Bug 修复**
- 修复 HTML 应用不显示状态栏的问题
- 修复部分系统应用名称显示为空的问题
- 修复 AI 模块开发中代码块显示内容叠加的问题
- 修复 AI HTML 编程中工具调用失败的问题
- 优化 AI HTML 编程的提示词和模型兼容性

### v1.7.3
**新功能与优化**
- 状态栏颜色跟随主题：默认跟随主题色彩，浅色主题用浅色背景，深色主题用深色背景
- 支持自定义状态栏背景颜色：可选择透明、跟随主题或自定义颜色
- 修复状态栏文字看不清的问题

### v1.7.2
**Bug 修复**
- 修复 JS 文件选择器在部分系统上无法选择的兼容性问题
- 修复视频全屏时未自动横屏的问题，现在会自动旋转并填充显示

### v1.7.1
**Bug 修复与新功能**
- 修复小红书等网站图片长按无法保存的问题
- 新增小红书图片下载器模块，支持批量下载
- 修复 Blob 格式文件（如 JSON）导出失败的问题
- 修复 HTML 项目导入后 CSS/JS 不生效的问题
- 修复任务列表显示双重名称的问题

### v1.7.0
**Bug 修复与优化**
- 修复数十个已知问题
- 优化 AI Agent 编程架构

### v1.6.0
**新增功能**
- 扩展模块系统：类油猴脚本的 JS/CSS 注入系统
  - 9个功能丰富的内置模块（视频下载、平台视频提取、视频增强、网页分析、暗黑模式、隐私保护、内容增强）
  - 30+ 代码模板，快速创建模块
  - 20+ 模块分类，覆盖常见需求
  - 支持 URL 匹配规则（通配符/正则）
  - 支持用户配置项
  - 支持分享码导入导出
- AI 模块开发 Agent：AI 辅助开发扩展模块
  - 自然语言描述需求，自动生成代码
  - 自动语法检查和安全扫描
  - 自动修复检测到的错误
  - 代码片段库快速插入
- AI 图标生成：使用 AI 生成应用图标
- 图标库：收藏和管理生成的图标
- 在线音乐搜索：在线搜索下载音乐作为 BGM
- 公告模板系统：10 种精美公告弹窗模板
- 网页自动翻译：网页内容自动翻译功能

**优化改进**
- 重构扩展模块架构，支持更灵活的模块开发
- 优化 AI 功能，支持更多模型和供应商

### v1.5.0
**新增功能**
- AI HTML 编程助手：使用 AI 辅助生成和修改 HTML 代码
  - 支持多种文本/图像生成模型
  - 会话管理、模板选择、样式定制
  - 代码块解析、实时预览
- AI 设置界面：统一管理 API 密钥和模型
  - 支持添加多个 API Key，实时测试连接
  - 支持自定义 Base URL，模型列表从 API 实时获取
- HTML 应用：支持将 HTML/CSS/JS 项目转换为独立 Android 应用
- 主题系统：全新的主题定制功能
  - 内置多款精美主题风格，支持深色模式
  - 可自定义动画效果开关和速度
- 背景音乐（BGM）：为应用添加背景音乐
  - 支持 LRC 歌词同步显示、循环播放

**优化改进**
- 主页 UI 整合 AI 编程、主题设置、AI 设置入口
- FAB 菜单新增 HTML 应用创建入口

### v1.3.0
**新增功能**
- 媒体应用：支持图片/视频转换为独立 App
  - 图片转 App：全屏展示，支持铺满屏幕
  - 视频转 App：支持循环播放、音频开关、自动播放
  - 媒体应用支持导出为独立 APK
- 用户脚本注入：支持自定义 JavaScript 脚本
  - 支持多个脚本管理（启用/禁用）
  - 支持页面加载前/后执行时机
  - 导出 APK 完整支持脚本注入
- 启动画面（Splash Screen）：支持设置应用启动时显示的图片或视频
  - 支持图片启动画面，可设置显示时长
  - 支持视频启动画面，内置视频裁剪器（时长不限）
  - 视频启动画面支持音频开关
  - 支持点击跳过、横屏显示、铺满屏幕
- 视频裁剪组件：可视化选择视频片段，实时预览

**优化改进**
- 数据模型重构，支持视频裁剪配置持久化
- Shell 模式（导出 APK）完整支持启动画面播放
- 优化 MediaPlayer 视频播放，支持精确 seek 和自动停止
- 主页 FAB 改为展开菜单，支持创建网页应用和媒体应用

**Bug 修复**
- 修复快捷方式图标错误使用启动图片的问题
- 修复数据库 schema 不匹配导致的闪退问题

### v1.2.3
**Bug 修复**
- 修复构建 APK 图标被放大裁剪的问题
- 遵循 Android Adaptive Icon 规范处理图标
- 提升图标清晰度（使用 xxxhdpi 432px 分辨率）

### v1.2.2
**Bug 修复**
- 修复 Release 版本构建 APK 时自定义图标不生效的问题
- 优化 ArscEditor 图标路径替换

### v1.2.1
**新增功能**
- 全屏模式：隐藏工具栏，无浏览器特征

### v1.2.0
**Bug 修复**
- 修复导出APK包名非法导致安装失败
- 修复导出APK权限/Provider冲突问题

### v1.1.0
**新增功能**
- 一键构建独立 APK 安装包
- 应用修改器：修改已安装应用的图标和名称
- 克隆安装：生成独立包名的克隆应用
- 访问电脑版：强制桌面模式加载网页

### v1.0.0
- 初始版本发布
- 支持 URL 转快捷方式基本功能
- 支持激活码、公告、广告拦截
- 支持项目模板导出

## 联系作者

- **QQ群**：1041130206（作者每天互动，发布更新消息和最新安装包）
- **作者QQ**：2711674184
- 本应用由作者（shihao）独立开发，有任何问题都可以找我
- 招 AI 编程队友，有想法可以一起实现！
